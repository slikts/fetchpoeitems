javascript:(function(){"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var modNames=[[["All Attributes"],"All"],[["Intelligence"],"Int"],[["Strength"],"Str"],[["Dexterity"],"Dex"],[["All Elemental Resistances"],"All"],[["Fire Resistance","Fire and Cold Resistances","Fire and Lightning Resistances","Fire and Chaos Resistances"],"Fire"],[["Cold Resistance","Fire and Cold Resistances","Cold and Lightning Resistances","Cold and Chaos Resistances"],"Cold"],[["Lightning Resistance","Fire and Lightning Resistances","Lightning and Chaos Resistances","Cold and Lightning Resistances"],"Lightn"],[["Chaos Resistance","Fire and Chaos Resistances","Lightning and Chaos Resistances","Cold and Chaos Resistances"],"Chaos"],[["Maximum Life"],"Life"],[["Maximum Mana"],"Mana"],[["Maximum Energy Shield"],"ES"]];var inventoryIds=["Amulet","Ring","Ring2","Helm","BodyArmour","Belt","Gloves","Boots","Weapon","Offhand"];function parseItems(data){var items={};data.filter(function(x){return inventoryIds.includes(x.inventoryId)}).forEach(function(item){return items[item.inventoryId]=merge([item.implicitMods,item.explicitMods,item.craftedMods].filter(function(x){return x}).map(parseMods))});return items}function parseMods(rawMods){var mods={};rawMods.map(function(x){return x.match(/\+(\d+)%? to (.+)/)}).filter(function(x){return x}).forEach(function(x){return mods[upperFirst(x[2])]=+x[1]});return mods}function merge(modList){var merged={};modList.forEach(function(mod){return Object.keys(mod).forEach(function(key){return merged[key]=merged[key]+mod[key]||mod[key]})});return merged}function upperFirst(x){return x[0].toUpperCase()+x.substr(1)}function makeTableText(items){var table=[["Ctrl+V"].concat(inventoryIds)].concat(modNames.map(function(_ref){var _ref2=_slicedToArray(_ref,2),_long=_ref2[0],_short=_ref2[1];return[_short].concat(inventoryIds.map(function(id){var value=0;for(var attribute in items[id]){if(_long.includes(attribute)){value+=items[id][attribute]}}if(value===0){return}return value}))})).map(function(row){return row.join(String.fromCharCode(9))}).join("\n");return table}function getFormData(){var data=new FormData;var fields={character:function character(x){return document.querySelector(".characterName").innerHTML},accountName:function accountName(x){return document.querySelector('a[href^="/account/view-profile/"]').getAttribute("href").split("/").reverse()[0]}};Object.keys(fields).forEach(function(name){try{data.append(name,fields[name]())}catch(e){alert("Failed to get character, account not logged in?");throw e}});return data}function promptTableText(text){prompt("Ctrl+C",text)}function fetchData(){var host="www.pathofexile.com";var path="/";if(window.location.hostname!==host||window.location.pathname!==path){var newlocation="https://".concat(host).concat(path);if(confirm("Wrong location, redirect to ".concat(newlocation,"?"))){window.location=newlocation;return}}fetch("/character-window/get-items",{method:"POST",body:getFormData(),credentials:"same-origin"}).then(function(response){return response.json()}).then(function(response){return promptTableText(makeTableText(parseItems(response.items)))})}fetchData();})()